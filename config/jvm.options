# Heap Settings
-Xms4g
-Xmx4g

# GC Configuration - ZGC (Java 21)
-XX:+UseZGC
-XX:MaxGCPauseMillis=10
-XX:ZCollectionInterval=120

# Performance Optimizations
-XX:+AlwaysPreTouch
-XX:+UseNUMA
-XX:+DisableExplicitGC
-XX:+ParallelRefProcEnabled
-XX:+UseStringDeduplication

# JIT Compiler
-XX:+UseCompressedOops
-XX:+UseCompressedClassPointers
-XX:ReservedCodeCacheSize=512m

# Metaspace Settings (Class Metadata)
-XX:MetaspaceSize=128m
-XX:MaxMetaspaceSize=256m
-XX:CompressedClassSpaceSize=128m

# Virtual Threads (Project Loom)
-Djdk.virtualThreadScheduler.parallelism=16
-Djdk.virtualThreadScheduler.maxPoolSize=256

# Network
-Djava.net.preferIPv4Stack=true

# Encoding
-Dfile.encoding=UTF-8

# Memory Uncommit (return memory to OS during idle periods)
-XX:+ZUncommit
-XX:ZUncommitDelay=300

# Native Memory Tracking
-XX:NativeMemoryTracking=summary

# Java Flight Recorder (Production Monitoring)
-XX:StartFlightRecording=dumponexit=true,filename=logs/app.jfr
-XX:FlightRecorderOptions=stackdepth=128

# GC Logging
-Xlog:gc*=info:file=logs/gc.log:time,uptime,level,tags:filecount=5,filesize=10M

# Note: For Docker, paths will be /app/logs/ instead of logs/
# The application will handle path resolution automatically

